window.onload=window.onresize=function(){document.body.style.height=window.innerHeight+"px";var oAbout=document.querySelector(".nav-about");var oMaskbg=document.querySelector("#maskbg");oBgMask=document.getElementById("bgmask");oBgMask.style.background="#111";oBgMask.style.opacity="0.9";oBgMask.style.width=window.innerWidth+"px";oBgMask.style.height=window.innerHeight+"px";oAbout.onmouseenter=function(){oAbout.style.opacity=1};oAbout.onmouseleave=function(){oAbout.style.opacity=0.6};oAbout.onclick=function(){if(oMaskbg.style.display=="block"){oMaskbg.style.display="none"}else{oMaskbg.style.display="block"}if(oMaskbg.style.display=="block"){oAbout.children[0].innerHTML="Close"}else{oAbout.children[0].innerHTML="About"}};var oArrow=document.getElementById("arrowdown");oArrow.style.mozTransition="height 500ms ease-out";oArrow.style.webkitTransition="height 500ms ease-out";oArrow.style.transition="height 500ms ease-out";var oNavborder=document.getElementById("navborder");var oNavcont=document.getElementById("navcont");var oRainbow=document.getElementById("rainbow");var oUl1=document.getElementById("ul1");var aLi=oUl1.children;var oBox=aLi[aLi.length-1];for(var i=0;i<aLi.length-1;i++){aLi[i].style.lineHeight=aLi[i].offsetHeight+"px";aLi[i].onmouseenter=function(){move2(oBox,this.offsetLeft);this.children[0].style.background="rgba("+rnd(0,256)+","+rnd(0,256)+","+rnd(0,256)+",0.3)";this.children[0].style.height="100%"};aLi[i].onmouseleave=function(){this.children[0].style.height="0"}}var speed=0;var left=0;function move2(obj,iTarget){clearInterval(obj.timer);obj.timer=setInterval(function(){speed+=(iTarget-left)/5;speed*=0.7;left+=speed;obj.style.left=Math.round(left)+"px";if(obj.offsetLeft==iTarget&&Math.abs(speed)<1){clearInterval(obj.timer)}},30)}oNavborder.addEventListener("mouseenter",function(){oNavborder.style.height="3%";oNavcont.style.top="3%";oUl1.style.transform="translateY(125%)"});oNavcont.addEventListener("mouseleave",function(){oNavborder.style.height="2%";oNavcont.style.top="-20%";oUl1.style.transform="translateY(-125%)"});var oNavclickborder=document.getElementById("navclickborder");oNavclickborder.style.left=oUl1.offsetLeft+"px";oNavclickborder.style.width=oUl1.children[0].offsetWidth+"px";var oFixdiv=document.getElementById("fixdiv");var oAllcont=document.getElementById("allcont");var aPages=oAllcont.children;var wh=window.innerHeight;var testversion=false;var browser=navigator.appName;var b_version=navigator.appVersion;var version=b_version.split(";");var trim_Version=version[1].replace(/[ ]/g,"");if(window.addEventListener&&trim_Version!="MSIE9.0"){testversion=true;oAllcont.style.mozTransition="top 500ms ease-out";oAllcont.style.webkitTransition="top 500ms ease-out";oAllcont.style.transition="top 500ms ease-out"}for(var i=0;i<aLi.length-1;i++){(function(index){aLi[i].onclick=function(){oNavclickborder.style.display="block";oNavclickborder.style.left=oUl1.offsetLeft+this.offsetLeft+"px";if(testversion){oAllcont.style.top=-index*wh+"px"}else{move(oAllcont,{top:-index*wh})}}})(i)}addMouseWheel(oAllcont,function(down){if(mousewheeldone){return}clearInterval(wheeltimer);if(down){if(testversion){if(oAllcont.offsetTop>-wh*3){oAllcont.style.top=oAllcont.offsetTop-wh+"px"}else{oAllcont.style.top=-wh*3+"px"}}else{if(oAllcont.offsetTop>-wh*3){move(oAllcont,{top:oAllcont.offsetTop-wh})}else{oAllcont.style.top=-wh*3+"px"}}}else{if(testversion){if(oAllcont.offsetTop<=-wh){oAllcont.style.top=oAllcont.offsetTop+wh+"px"}else{oAllcont.style.top=0}}else{if(oAllcont.offsetTop<=-wh){move(oAllcont,{top:oAllcont.offsetTop+wh})}else{oAllcont.style.top=0}}}});oArrow.onclick=function(){if(testversion){if(oAllcont.offsetTop>-wh*3){oAllcont.style.top=oAllcont.offsetTop-wh+"px"}else{oAllcont.style.top=-wh*3+"px"}}else{if(oAllcont.offsetTop>-wh*3){move(oAllcont,{top:oAllcont.offsetTop-wh})}else{oAllcont.style.top=-wh*3+"px"}}};for(var i=0;i<aPages.length;i++){aPages[i].style.position="relative";aPages[i].style.left="0";aPages[i].style.width=window.innerWidth+"px";aPages[i].style.height=window.innerHeight+"px"}var oBg=document.querySelector(".bg");var aOverflow=document.querySelectorAll(".overflow");for(var i=0;i<2;i++){aOverflow[i].children[0].style.mozTransition="top 500ms ease-out";aOverflow[i].children[0].style.webkitTransition="top 500ms ease-out";aOverflow[i].children[0].style.transition="top 500ms ease-out"}setTimeout(function(){aOverflow[0].children[0].style.top="0"},300);setTimeout(function(){aOverflow[1].children[0].style.top="0";oArrow.style.height="10%"},800);if(typeof Object.extend!=="function"){Object.extend=function(d,s){for(var k in s){if(s.hasOwnProperty(k)){var v=s[k];if(d.hasOwnProperty(k)&&typeof d[k]==="object"&&typeof v==="object"){Object.extend(d[k],v)}else{d[k]=v}}}return d}}function Cloud(properties){var defaults={puffRadius:32,puffColor:{r:255,g:255,b:255},opacity:0.33,count:32};properties=Object.extend(defaults,typeof properties==="undefined"?{}:properties);this.count=properties.count;this.points=[];this.minX=0;this.minY=0;this.maxX=0;this.maxY=0;this.puff=new Puff({radius:properties.puffRadius,color:properties.puffColor,opacity:properties.opacity});this.img=document.createElement("canvas");this.ctx=this.img.getContext("2d");for(var i=0;i<this.count;i++){var seed=Math.random();var x=seed*(properties.puffRadius+seed)*Math.cos(1+i+seed)*Math.PI;var y=seed*(properties.puffRadius+seed)*Math.sin(1+i+seed)*Math.PI/2;this.minX=Math.min(this.minX,x-properties.puffRadius);this.maxX=Math.max(this.maxX,x+properties.puffRadius);this.minY=Math.min(this.minY,y-properties.puffRadius);this.maxY=Math.max(this.maxY,y+properties.puffRadius);this.points.push([x,y])}this.img.height=(this.maxY-this.minY)+properties.puffRadius*2;this.img.width=(this.maxX-this.minX)+properties.puffRadius*2;this.render()}function Puff(properties){var color=function(obj){return obj.r+","+obj.g+","+obj.b};this.img=document.createElement("canvas");var context=this.img.getContext("2d");this.img.height=this.img.width=properties.radius*2;var grad=context.createRadialGradient(properties.radius,properties.radius,0,properties.radius,properties.radius,properties.radius);grad.addColorStop(0,"rgba("+color(properties.color)+","+properties.opacity+")");grad.addColorStop(1,"rgba("+color(properties.color)+",0)");context.fillStyle=grad;context.beginPath();context.arc(properties.radius,properties.radius,properties.radius,0,Math.PI*2,true);context.fill();context.closePath()}Cloud.prototype={constructor:Cloud,render:function(){var cX=this.img.width/2-this.puff.img.width/2,cY=this.img.height/2-this.puff.img.height/2;for(var i=0;i<this.count;i++){this.ctx.drawImage(this.puff.img,cX+this.points[i][0],cY+this.points[i][1])}}};var canvascl=document.getElementById("canvas-cloud"),context=canvascl.getContext("2d"),height=canvascl.height=document.body.offsetHeight,width=canvascl.width=document.body.offsetWidth,clouds=[],speed=1.11,cloudCount=width*0.09;setTimeout(init,10);function init(){for(var i=0;i<cloudCount;i++){var count=Math.random()*64+32,rad=Math.random()*32+32,cloud=new Cloud({count:count,puffRadius:rad,opacity:Math.random()*0.05});cloud.x=Math.random()*(width*2)-width;cloud.y=cloud.img.height-Math.random()*height/2;cloud.speed=speed*0.6+Math.random()*(speed*0.4);clouds.push(cloud)}update();render()}function update(){for(var i=0;i<cloudCount;i++){if(clouds[i].x+clouds[i].img.width<0){clouds[i].x=width+clouds[i].img.width}else{clouds[i].x-=clouds[i].speed}}setTimeout(update,1000/30)}function render(){requestAnimationFrame(render);context.clearRect(0,0,width,height);for(var i=0;i<cloudCount;i++){context.drawImage(clouds[i].img,clouds[i].x-clouds[i].img.width/2,clouds[i].y-clouds[i].img.height/2)}}!function(){var setup={id:"tree",friction:2,length:300,reduction:1.33,dotSize:20,rotationSpeed:0.002,collapsedNodeColor:"#fff",defaultNodeColor:"pink",expandedNodeColor:"skyblue",line:{color:"#aaa",dasharray:"1,1"},defaultNodeStrokeColor:"#aaa",overNodeColor:"pink",defaultTextColor:"#888",selectedTextColor:"#000",textFont:"kaiti"};var Node=function(parent,label,col,link){this.link=link;this.col=col;this.pR=0;this.len=0;this.lex=0;this.angle=0;this.expanded=false;this.children=[];this.parent=parent;this.visible=false;this.x=0;this.y=0;this.ini={len:0,lex:0,angle:0,parent:parent};if(parent!=""){parent.children.push(this);var a=(2*Math.PI)/parent.children.length;var b=(parent!="")?Math.random():0;for(var i in parent.children){var csky=parent.children[i];csky.angle=csky.ini.angle=Math.PI/2+a*i+b;csky.len=csky.ini.len=csky.parent.ini.len/setup.reduction}}else{this.visible=true;this.ini.len=setup.length*setup.reduction}this.line=svg.createLine(1,setup.line);this.text=svg.createText(label,setup.textFont,false,setup.defaultTextColor)};Node.prototype.createPlot=function(){this.pR=Math.round(Math.max(5,setup.dotSize*this.ini.len/200));this.plot=svg.createOval(this.pR*2,true);this.plot.strokeColor(setup.defaultNodeStrokeColor);this.plot.strokeWidth(1);this.plot.obj=this;this.text.fontSize(8+this.pR)};Node.prototype.run=function(){if(this.visible){var xp=this.parent?this.parent.x:drag.x;var yp=this.parent?this.parent.y:drag.y;var a=Math.atan2((this.y+Math.sin(this.angle+rotation)*setup.friction)-yp,(this.x+Math.cos(this.angle+rotation)*setup.friction)-xp);if(this.lex<this.len){this.lex+=(this.len-this.lex)*0.1}this.x=xp+Math.cos(a)*this.lex;this.y=yp+Math.sin(a)*this.lex;if(this.x<this.pR){this.x=this.pR}else{if(this.x>screen.width-this.pR){this.x=screen.width-this.pR}}if(this.y<this.pR){this.y=this.pR}else{if(this.y>screen.height-this.pR){this.y=screen.height-this.pR}}this.line.move(this.x,this.y,xp,yp);this.plot.move(this.x,this.y,this.pR);this.text.move(this.x+this.pR+5,this.y+this.pR*0.25)}};Node.prototype.collapse=function(){this.expanded=false;this.text.fillColor(this.parent&&this.parent.children.length==1?setup.selectedTextColor:setup.defaultTextColor);this.text.fontWeight(this.parent&&this.parent.children.length==1?"bold":"normal");this.plot.fillColor((this.children.length)?setup.collapsedNodeColor:this.col);for(var i=0;i<this.children.length;i++){var csky=this.children[i];csky.visible=false;csky.lex=0;csky.line.move(-1,-1,-1,-2);csky.plot.move(-1000,-1,0);csky.text.move(-1000,0);csky.expanded=false;csky.collapse()}};Node.prototype.expand=function(){if(this.ini.parent!=""){for(var i=0;i<this.ini.parent.children.length;i++){this.ini.parent.children[i].collapse()}}this.expanded=true;this.text.fillColor(setup.selectedTextColor);this.text.fontWeight("bold");this.plot.fillColor(setup.expandedNodeColor);for(var i=0;i<this.children.length;i++){this.children[i].visible=true;this.children[i].lex=0}};Node.prototype.down=function(){if(pointer.isDraging){return}drag.ox=pointer.x-this.x;drag.oy=pointer.y-this.y;if(drag.node!=this){this.text.fillColor(setup.selectedTextColor);this.plot.fillColor(setup.expandedNodeColor);var i=0,node;while(node=nodes[i++]){node.parent=node.ini.parent;node.len=node.ini.len;node.lex=node.ini.len;node.angle=node.ini.angle}var oc=[];var ow=this;oc.push(ow);while(ow.parent!=""){ow=ow.parent;oc.push(ow)}for(var i=1;i<oc.length;i++){oc[i].lex=oc[i-1].ini.len;oc[i].len=oc[i-1].ini.len;oc[i].angle=oc[i-1].ini.angle-Math.PI;oc[i].parent=oc[i-1]}this.parent="";this.len=0;this.lex=0;this.angle=0;drag.node.plot.strokeColor(setup.defaultNodeStrokeColor);drag.node.plot.strokeWidth(1);drag.node=this}};var run=function(){requestAnimationFrame(run);if(drag.ing){drag.x=pointer.x-drag.ox,drag.y=pointer.y-drag.oy}rotation+=setup.rotationSpeed;var i=0,node;while(node=nodes[i++]){node.run()}};var setMenuTree=function(theNode,parent){if(theNode.tagName=="Q"||theNode.tagName=="A"){var s=theNode.innerHTML;var d=s.toUpperCase().indexOf("<Q");if(d>0){s=s.substring(0,d)}d=s.toUpperCase().indexOf("<A");if(d>0){s=s.substring(0,d)}if(theNode.style.color!=""){setup.defaultNodeColor=theNode.style.color}parent=new Node(parent,s,setup.defaultNodeColor,theNode.href);nodes.push(parent)}for(var i=0;i<theNode.childNodes.length;i++){setMenuTree(theNode.childNodes[i],parent)}};var screen=ge1doot.screen("screen");var pointer=screen.pointer;var nodes=[],drag={x:0,y:0,ox:0,oy:0,node:false,ing:false},rotation=0,nodeOver,setup;pointer.down=function(e){if(e&&e.target&&e.target.obj){drag.ing=true;e.target.obj.down()}};pointer.up=function(e){drag.ing=false};pointer.tap=function(e){if(e&&e.target&&e.target.obj){drag.ing=false;if(drag.node.link){window.open(drag.node.link,"_blank")}else{if(drag.node.expanded){drag.node.collapse()}else{drag.node.expand()}}}};pointer.move=function(e){if(e&&e.target&&e.target.obj){var o=e.target.obj;if(nodeOver){nodeOver.plot.strokeColor(setup.defaultNodeStrokeColor);nodeOver.plot.strokeWidth(1)}o.plot.strokeColor(setup.overNodeColor);o.plot.strokeWidth(Math.round(Math.max(2,o.pR/3)));nodeOver=o}};var svg=new ge1doot.SVGLib(screen.elem,true);if(svg){setup.length=Math.max(150,screen.height/4);drag.x=screen.width/2;drag.y=screen.height/2;setMenuTree(document.getElementById(setup.id),"");var i=0,node;while(node=nodes[i++]){node.createPlot()}drag.node=nodes[0];nodes[0].collapse();nodes[0].expand();run()}}();var oEpage=document.getElementById("earthpage");var treeready=false;oRainbow.style.width=0.8*window.innerWidth+"px";oRainbow.style.height=0.5*oRainbow.offsetWidth+"px";for(var i=0;i<oRainbow.children.length;i++){oRainbow.children[i].children[0].style.borderWidth=0.06*oRainbow.offsetWidth+"px"}oRainbow.children[0].children[0].style.clip=" rect(0px, "+(1.13*oRainbow.children[0].offsetWidth)+"px, "+(1.13*oRainbow.children[0].offsetHeight)+"px, 0px)";oRainbow.children[1].children[0].style.clip=" rect(0px, "+(1*oRainbow.children[1].offsetWidth)+"px, "+(1*oRainbow.children[1].offsetHeight)+"px, 0px)";oRainbow.children[2].children[0].style.clip=" rect(0px, "+(0.87*oRainbow.children[2].offsetWidth)+"px, "+(0.87*oRainbow.children[2].offsetHeight)+"px, 0px)";oRainbow.children[3].children[0].style.clip=" rect(0px, "+(0.74*oRainbow.children[3].offsetWidth)+"px, "+(0.74*oRainbow.children[3].offsetHeight)+"px, 0px)";oRainbow.children[4].children[0].style.clip=" rect(0px, "+(0.6*oRainbow.children[4].offsetWidth)+"px, "+(0.6*oRainbow.children[4].offsetHeight)+"px, 0px)";oRainbow.children[5].children[0].style.clip=" rect(0px, "+(0.46*oRainbow.children[5].offsetWidth)+"px, "+(0.46*oRainbow.children[5].offsetHeight)+"px, 0px)";oRainbow.children[6].children[0].style.clip=" rect(0px, "+(0.33*oRainbow.children[6].offsetWidth)+"px, "+(0.26*oRainbow.children[6].offsetHeight)+"px, 0px)";var c=document.querySelector("#c");var leaves=[];var w=c.width=window.innerWidth,h=c.height=window.innerHeight,ctx=c.getContext("2d"),opts={speed:1.2,splitSizeProbabilityMultiplier:1/1000,maxIterations:6.8,startSize:30,baseSizeMultiplier:0.7,addedSizeMultiplier:0.2,baseAngleVariation:-Math.PI/16,addedAngleVariation:Math.PI/8,angleVariationIterationMultiplier:0.8,baseLeafSize:60,addedLeafSize:25,rotYVel:0.01,focalLength:250,vanishPoint:{x:w/2,y:h/2},translations:{x:0,y:450,z:400}},rotY=0,rotYsin=0,rotYcos=1,lines=[];function Line(parent){this.iteration=parent.iteration+1;this.start=parent.end;this.angle={a:parent.angle.a+this.iteration*opts.angleVariationIterationMultiplier*(opts.baseAngleVariation+opts.addedAngleVariation*Math.random()),b:parent.angle.b+this.iteration*opts.angleVariationIterationMultiplier*(opts.baseAngleVariation+opts.addedAngleVariation*Math.random()),};this.size=(opts.baseSizeMultiplier+opts.addedSizeMultiplier*Math.random())*parent.size;this.color="hsla(hue,80%,50%,alp)".replace("hue",(1-this.iteration/opts.maxIterations)*40).replace("alp",1-(this.iteration/opts.maxIterations)*0.7);var sinA=Math.sin(this.angle.a),sinB=Math.sin(this.angle.b),cosA=Math.cos(this.angle.a),cosB=Math.cos(this.angle.b);this.speed={x:opts.speed*cosA*sinB,y:opts.speed*sinA*sinB,z:opts.speed*cosB};this.end=this.closest=new Point(this.start.x,this.start.y,this.start.z);this.done=false;this.time=0}var aText=["HTML","3D","H5","Crash","APP1","算法","7","8","9","10","11","12"];var i=0;var j=0;var treetimer=null;var bready=false;Line.prototype.update=function(){if(!this.done){this.end.x+=this.speed.x;this.end.y+=this.speed.y;this.end.z+=this.speed.z;this.time+=0.1;if(this.time>this.size/1.9){if(this.iteration<opts.maxIterations){lines.push(new Line(this));lines.push(new Line(this))}else{var oLeaf=new Leaf(this);lines.push(oLeaf);leaves.push(oLeaf)}this.done=true}}if(this.start.hasntCalculatedScreen){this.start.calculateScreen()}this.end.calculateScreen();this.closest=this.start;if(this.end.transformed.z<this.start.transformed.z){this.closest=this.end}};Line.prototype.render=function(){ctx.strokeStyle=this.color;ctx.lineWidth=this.size*this.start.screen.scale;ctx.beginPath();ctx.moveTo(this.start.screen.x,this.start.screen.y);ctx.lineTo(this.end.screen.x,this.end.screen.y);ctx.stroke();this.start.hasntCalculatedScreen=this.end.hasntCalculatedScreen=true};function Leaf(parent){var text=aText[i];this.message={id:i,l:0,t:0,w:0,h:0};this.name="leaf";this.text=text;this.href="indexes/index"+(i+1)+".html";i+=1;j+=1;if(i>11){i=0}if(j>11&&j%2==0){this.text="☆";this.href="javascript:;"}this.point=this.closest=parent.end;this.size=opts.baseLeafSize+opts.addedLeafSize*Math.random();this.time=-Math.PI/2;this.speed=0.03+0.03*Math.random();this.color="hsla(hue,80%,50%,.8)".replace("hue",80+20*Math.random())}Leaf.prototype.update=function(){this.time+=this.speed};Leaf.prototype.render=function(){ctx.fillStyle=this.color;var size=(Math.sin(this.time)/2+0.5)*this.size*this.point.screen.scale;ctx.fillRect(this.point.screen.x-size/2,this.point.screen.y-size/2,size,size);var sx=this.point.screen.x-size/2;var _sy=this.point.screen.y-size/2;var sy=this.point.screen.y+size/2;this.message.l=[sx,(sx+size)];this.message.t=[_sy,(_sy+size)];this.message.w=this.message.h=size;var gradtext=ctx.createLinearGradient(sx,sy,sx+size,sy+size);gradtext.addColorStop(0,"rgb(192, 80, 77)");gradtext.addColorStop(0.5,"rgb(155, 187, 89)");gradtext.addColorStop(1,"rgb(128, 100, 162)");ctx.fillStyle=gradtext;ctx.font=size/2+"px songti";ctx.fillText(this.text,sx,sy-size/4)};function Point(x,y,z){this.x=x;this.y=y;this.z=z;this.screen={};this.transformed={};this.hasntCalculatedScreen=true}Point.prototype.calculateScreen=function(){var x=this.x,y=this.y,z=this.z;var X=x;x=x*rotYcos-z*rotYsin;z=z*rotYcos+X*rotYsin;x+=opts.translations.x;y+=opts.translations.y;z+=opts.translations.z;this.transformed.z=z;this.screen.scale=opts.focalLength/z;this.screen.x=opts.vanishPoint.x+x*this.screen.scale;this.screen.y=opts.vanishPoint.y+y*this.screen.scale;this.hasntCalculatedScreen=false};treetimer=setInterval(anim,16);function anim(){ctx.clearRect(0,0,w,h);rotY+=opts.rotYVel;rotYcos=Math.cos(rotY);rotYsin=Math.sin(rotY);lines.map(function(line){line.update()});lines.sort(function(a,b){return b.closest.transformed.z-a.closest.transformed.z});lines.map(function(line){line.render()});c.addEventListener("click",leafsclick);c.addEventListener("mousemove",leafsmove)}function leafsclick(ev){if(!treeready){clearInterval(treetimer);treeready=true}else{treetimer=setInterval(anim,16);treeready=false}var ev=ev||event;var x=ev.clientX;var y=ev.clientY;for(var i=0;i<leaves.length;i++){if(x>leaves[i].message.l[0]&&x<leaves[i].message.l[0]+leaves[i].message.w&&y>leaves[i].message.t[0]&&y<leaves[i].message.t[0]+leaves[i].message.h){window.open(leaves[i].href)}}}function leafsmove(ev){var ev=ev||event;var x=ev.clientX;var y=ev.clientY;for(var i=0;i<leaves.length;i++){if(x>leaves[i].message.l[0]&&x<leaves[i].message.l[0]+leaves[i].message.w&&y>leaves[i].message.t[0]&&y<leaves[i].message.t[0]+leaves[i].message.h){ctx.fillStyle="orange";ctx.fillRect(leaves[i].message.l[0],leaves[i].message.t[0],leaves[i].message.w,leaves[i].message.h);var gradtext=ctx.createLinearGradient(leaves[i].message.l[0],(leaves[i].message.t[0]+leaves[i].message.h),leaves[i].message.l[1],(leaves[i].message.t[0]+leaves[i].message.h*2));gradtext.addColorStop(0,"rgb(192, 80, 77)");gradtext.addColorStop(0.5,"rgb(155, 187, 89)");gradtext.addColorStop(1,"rgb(128, 100, 162)");ctx.fillStyle=gradtext;ctx.font=leaves[i].message.w/2+"px songti";ctx.fillText(leaves[i].text,leaves[i].message.l[0],(leaves[i].message.t[0]+leaves[i].message.h*3/4))}else{if(treeready){ctx.fillStyle=leaves[i].color;ctx.fillRect(leaves[i].message.l[0],leaves[i].message.t[0],leaves[i].message.w,leaves[i].message.h);var gradtext=ctx.createLinearGradient(leaves[i].message.l[0],(leaves[i].message.t[0]+leaves[i].message.h),leaves[i].message.l[1],(leaves[i].message.t[0]+leaves[i].message.h*2));gradtext.addColorStop(0,"rgb(192, 80, 77)");gradtext.addColorStop(0.5,"rgb(155, 187, 89)");gradtext.addColorStop(1,"rgb(128, 100, 162)");ctx.fillStyle=gradtext;ctx.font=leaves[i].message.w/2+"px songti";ctx.fillText(leaves[i].text,leaves[i].message.l[0],(leaves[i].message.t[0]+leaves[i].message.h*3/4))}}}}lines.push(new Line({end:new Point(0,0,0),angle:{a:Math.PI/2,b:-Math.PI/2},size:opts.startSize,iteration:0}));anim();window.addEventListener("resize",function(){w=c.width=window.innerWidth;h=c.height=window.innerHeight;opts.vanishPoint.x=w/2;opts.vanishPoint.y=h/2});var oFrUl=document.getElementById("frul");var aFrLi=oFrUl.children;var oFrBtn=document.getElementById("btnfr");var content=0;var fready=true;oFrUl.style.marginLeft=-oFrUl.offsetWidth/2+"px";oFrUl.style.marginTop=-oFrUl.offsetHeight/2+"px";var aPos=[];for(var i=0;i<aFrLi.length;i++){aPos.push({left:aFrLi[i].offsetLeft,top:aFrLi[i].offsetTop,width:aFrLi[i].offsetWidth,height:aFrLi[i].offsetHeight,opacity:1});aFrLi[i].style.left=aPos[i].left+"px";aFrLi[i].style.top=aPos[i].top+"px"}for(var i=0;i<aFrLi.length;i++){aFrLi[i].style.position="absolute";aFrLi[i].style.margin=0;aFrLi[i].style.background="rgba("+rnd(0,256)+","+rnd(0,256)+","+rnd(0,256)+",0.8)";aFrLi[i].children[0].children[1].style.background="url(img/index"+(i+1)+".png)";aFrLi[i].children[0].children[1].href="indexes/index"+(i+1)+".html"}oFrBtn.onclick=function(){if(!fready){return}fready=false;down()};function down(){var i=aFrLi.length-1;clearInterval(oFrUl.timer);oFrUl.timer=setInterval(function(){(function(index){move(aFrLi[i],{left:oFrUl.offsetWidth/2,top:oFrUl.offsetHeight,width:10,height:10,opacity:0.5},{time:700,fn:function(){if(index==0){for(var i=0;i<aFrLi.length;i++){aFrLi[i].style.background="rgba("+rnd(0,256)+","+rnd(0,256)+","+rnd(0,256)+",0.8)"}up()}}})})(i);i--;if(i==-1){clearInterval(oFrUl.timer)}},100)}function up(){var i=aFrLi.length-1;clearInterval(oFrUl.timer);oFrUl.timer=setInterval(function(){(function(index){move(aFrLi[i],aPos[i],{time:700,fn:function(){if(index==0){fready=true}}})})(i);i--;if(i==-1){clearInterval(oFrUl.timer)}},100)}var aWallDiv=oFrUl.getElementsByTagName("div");for(var i=0;i<aWallDiv.length;i++){addWall(aWallDiv[i])}};function rnd(n,m){return parseInt(n+Math.random()*(m-n))}function d2a(n){return n*Math.PI/180}function a2d(n){return n*180/Math.PI}function getPos(obj){var l=t=0;for(;obj;){l+=obj.offsetLeft;t+=obj.offsetTop;obj=obj.offsetParent}return{left:l,top:t}}var lastwallX,lastwallY;document.onmousemove=function(ev){var oEvent=ev||event;lastwallX=oEvent.clientX;lastwallY=oEvent.clientY};function addWall(oDiv){var oS=oDiv.children[0];oDiv.onmouseenter=function(){var cx=getPos(oDiv).left+oDiv.offsetWidth/2;var cy=getPos(oDiv).top+oDiv.offsetHeight/2;var a=lastwallX-cx;var b=cy-lastwallY;var ang=90-a2d(Math.atan2(b,a));if(ang>=-45&&ang<=45){oS.style.left=0;oS.style.top=-oDiv.offsetHeight+"px";move(oS,{left:0,top:0})}else{if(ang>=45&&ang<=135){oS.style.left=oDiv.offsetWidth+"px";oS.style.top=0;move(oS,{left:0,top:0})}else{if(ang>=135&&ang<=225){oS.style.left=0;oS.style.top=oDiv.offsetHeight+"px";move(oS,{left:0,top:0})}else{oS.style.left=-oDiv.offsetWidth+"px";oS.style.top=0;move(oS,{left:0,top:0})}}}};oDiv.onmouseleave=function(){var cx=getPos(oDiv).left+oDiv.offsetWidth/2;var cy=getPos(oDiv).top+oDiv.offsetHeight/2;var a=lastwallX-cx;var b=cy-lastwallY;var ang=90-a2d(Math.atan2(b,a));if(ang>=-45&&ang<=45){move(oS,{left:0,top:-oDiv.offsetHeight})}else{if(ang>=45&&ang<=135){move(oS,{left:oDiv.offsetWidth,top:0})}else{if(ang>=135&&ang<=225){move(oS,{left:0,top:oDiv.offsetHeight})}else{move(oS,{left:-oDiv.offsetWidth,top:0})}}}}};