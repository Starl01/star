"use strict";var canvas={elem:document.createElement("canvas"),_resize:function(){this.width=this.elem.width=this.elem.offsetWidth;this.height=this.elem.height=this.elem.offsetHeight;this.resize&&this.resize()},init:function(){var ctx=this.elem.getContext("2d");var oPline=document.getElementById("pline");oPline.appendChild(this.elem);window.addEventListener("resize",this._resize.bind(this),false);this._resize();return ctx},setCursor:function(type){if(type!==this.cursor){this.cursor=type;this.elem.style.cursor=type}},pointer:function(){var pointer={x:0,y:0,isDown:false};pointer.move=function(e){var touchMode=e.targetTouches,pointer;if(touchMode){e.preventDefault();pointer=touchMode[0]}else{pointer=e}this.x=pointer.clientX;this.y=pointer.clientY};pointer.bind=function(elem,events,fn){for(var i=0,e=events.split(",");i<e.length;i++){elem.addEventListener(e[i],fn.bind(pointer),false)}};pointer.bind(window,"mousemove,touchmove",function(e){this.move(e)});pointer.bind(canvas.elem,"mousedown,touchstart",function(e){this.move(e);this.isDown=true;this.down&&this.down()});pointer.bind(window,"mouseup,touchend,touchcancel",function(e){e.preventDefault();this.isDown=false;this.up&&this.up()});return pointer}};