~function(){var count=50,circles=[],ds=2,dragging=false,colors=["#fff","#fff","#fff"],maxRad,grd;function Circle(){this.rad=10+Math.random()*maxRad;this.rad2=this.rad*this.rad;this.pos=new Vector(canvas.width*Math.random(),canvas.height*Math.random());this.vel=new Vector(Math.random()-0.5,Math.random()-0.5);this.acc=new Vector();this.offset=new Vector();this.force=new Vector();this.c=colors[Math.floor(Math.random()*colors.length)];this.locked=false;this.parent=null;this.k=0.1;this.damp=0.98}Circle.prototype.update=function(){this.acc.set(0,0);if(this.locked&&this.parent===null){this.acc.sub(this.force.sub(pointer,this.offset),this.pos).limit(1);this.vel.selfAdd(this.acc).limit(3);this.pos.sub(pointer,this.offset)}else{if(this.locked&&this.parent!==null&&this.pos.dist2(this.parent.pos)>=this.parent.rad2){this.force.sub(this.pos,this.parent.pos).selfMult(-this.k);this.acc.div(this.force,this.rad*0.5);this.vel.mult(this.force.add(this.vel,this.acc),this.damp).limit(14);this.pos.selfAdd(this.vel)}else{this.vel.selfAdd(this.acc.limit(1));if(this.vel.mag2()>0.5*0.5){this.vel.selfMult(0.99)}this.pos.selfAdd(this.vel)}}var dm=this.rad*1;if(this.pos.x<-dm){this.pos.x=canvas.width+dm}if(this.pos.x>canvas.width+dm){this.pos.x=-dm}if(this.pos.y<-dm){this.pos.y=canvas.height+dm}if(this.pos.y>canvas.height+dm){this.pos.y=-dm}};Circle.prototype.render=function(){ctx.beginPath();if(this.pos.dist2(pointer)<this.rad2){ctx.fillStyle="rgba(0,0,0,0)";ctx.globalAlpha=0.35;pointer.over=true}else{ctx.fillStyle="rgba(0,0,0,0)";ctx.globalAlpha=0.35}ctx.arc(this.pos.x,this.pos.y,this.rad,0,2*Math.PI);ctx.fill();ctx.strokeStyle="rgba(255,255,255,0.8)";ctx.globalAlpha=0.9;for(var j=0;j<count;j++){var that=circles[j];if(this.pos.dist2(that.pos)<this.rad2*1.44){ctx.beginPath();ctx.moveTo(this.pos.x,this.pos.y);ctx.lineTo(that.pos.x,that.pos.y);ctx.stroke();if(this.locked&&!that.locked){that.locked=true;that.parent=this}}else{if(that.parent!=null&&that.parent===this){ctx.beginPath();ctx.moveTo(this.pos.x,this.pos.y);ctx.lineTo(that.pos.x,that.pos.y);ctx.stroke()}}}ctx.fillStyle="rgba(255,255,255,0.5)";ctx.arc(this.pos.x,this.pos.y,this.rad/5,0,Math.PI*2);ctx.fill()};function draw(){requestAnimationFrame(draw);ctx.clearRect(0,0,canvas.width,canvas.height);ctx.globalCompositeOperation="lighter";pointer.over=false;for(var i=0;i<count;i++){circles[i].update();circles[i].render()}if(dragging){canvas.setCursor("move")}else{if(pointer.over){canvas.setCursor("pointer")}else{canvas.setCursor("default")}}ctx.globalAlpha=1;ctx.globalCompositeOperation="source-over";ctx.fillStyle=grd;ctx.fillRect(0,0,canvas.width,canvas.height)}var ctx=canvas.init();canvas.resize=function(){maxRad=Math.round(Math.sqrt(Math.min(this.width,this.height))*5);var outerRadius=this.width*0.7;var innerRadius=this.height*0.3;grd=ctx.createRadialGradient(this.width/2,this.height/2,innerRadius,this.width/2,this.height/2,outerRadius);grd.addColorStop(0,"rgba(0,0,0,0)");grd.addColorStop(1,"rgba(0,0,0,0)")};canvas.resize();var pointer=canvas.pointer();pointer.down=function(){for(var i=0;i<count;i++){if(circles[i].pos.dist2(this)<circles[i].rad2){circles[i].locked=true;circles[i].offset.sub(this,circles[i].pos);dragging=true;break}}};pointer.up=function(){for(var i=0;i<count;i++){circles[i].offset.set(0,0);circles[i].locked=false;circles[i].parent=null}dragging=false};for(var i=0;i<count;i++){circles[i]=new Circle()}draw()}();