<!doctype html><html><head><meta charset="utf-8"><title>数组去重排序</title><style>*{margin:0;padding:0;}.box{width:300px;margin:10px auto;}.box p{text-align:center;font-size:20px;}#btn{margin:20px 120px;width:60px;height:20px;}.box textarea{width:300px;height:260px;}</style><script>window.onload=function(){var oP1=document.getElementById('p1');var oP2=document.getElementById('p2');var oBtn=document.getElementById('btn');oBtn.onclick=function(){var string1=oP1.value;var arr=string1.split(',');var arrh=[];var json={};for(i=0;i<arr.length;i++){var arrh=arr[i].split('-');var price=arrh[1];var json2={count:1,sum:price}
if(price.indexOf('元')!=-1){price=parseFloat(price);}else{price=parseFloat(price)/10;}
var key=arrh[0];if(json[key]){json[key].count++;json[key].sum+=price;}else{json[key]={count:1,sum:price};}}
var arr3=[];for(var key in json){arr3.push([key,json[key]]);}
arr3.sort(function(n1,n2){return(n1[1].sum)-(n2[1].sum);});var json3={};for(var i=0;i<arr3.length;i++){json3[arr3[i][0]]=arr3[i][1];}
var all=0;var arr4=[];for(var key in json3){arr4.push(key+'('+json3[key].count+')'+'￥'+json3[key].sum+'元');all+=json3[key].sum;}
arr4.push('总价: ￥'+all);var string2=arr4.join('\n');oP2.value=string2;};};</script></head><body><div class="box"><p>输入原始文本(空格隔开)：</p><textarea id="p1">冰红茶-3元,冰绿茶-2.5元,橙汁-1.5元,葡萄汁-5毛,柠檬汁-1.5元,芒果汁-30毛,柠檬汁-1.5元,柠檬汁-1.5元,柠檬汁-1.5元,柠檬汁-1.5元</textarea><input type="button" id="btn" value="变"><p>这里输出结果</p><textarea id="p2"></textarea></div></body></html>